<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-112742714-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-112742714-1');</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="davcri"><title>Programmatically create an AtlasTexture in Godot</title><meta name=description content="I&rsquo;m currently working on a card game tutorial (that will soon be open sourced) and I needed to …"><meta property="og:title" content="Programmatically create an AtlasTexture in Godot"><meta property="og:image" itemprop=image content="https://davcri.github.io/img/posts/thumbs/godot-atlastexture-programmatically.png"><meta property="og:url" content="https://davcri.github.io/posts/programmatically-create-atlastexture-with-gdscript/"><meta property="og:description" content="I&rsquo;m currently working on a card game tutorial (that will soon be open sourced) and I needed to …"><meta property="og:type" content="article"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css integrity=sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4 crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=/css/main.css><link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Staatliches" rel=stylesheet></head><body><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous defer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js integrity=sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ crossorigin=anonymous defer></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js integrity=sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm crossorigin=anonymous defer></script><script src=https://use.fontawesome.com/03364e4af9.js defer></script><div class=container><style>.badge-custom{background-color:#f4e9ff;padding:.5em;color:#777}.active{color:#333;border-color:#000;border:rgba(.6,.6,.6,.1);border-width:1px;border-style:solid}</style><nav class="mt-sm-2 mt-2 mb-2 mt-xs-1"><div class=row><div class="col-sm-3 col-12 text-sm-right text-center pt-sm-4"></div><div class="col-sm-9 col-12 text-sm-left text-center"><h2 class="m-0 mb-2 mt-4"><a href=/ class=text-decoration-none>davcri</a></h2><p class="text-muted mb-1">Freelance game developer</p><ul id=nav-links class="list-inline mb-2"><li class=list-inline-item><a class="badge badge-white badge-custom" href=/>Blog</a></li><li class=list-inline-item><a class="badge badge-white badge-custom" href=/about/>About</a></li></ul><i></i><ul id=nav-social class=list-inline><li class="list-inline-item mr-3"><a href=https://github.com/davcri target=_blank><i class="fab fa-github fa-1x text-muted" style=width:32px;height:32px></i></a></li><li class="list-inline-item mr-3"><a href=https://twitter.com/dav__cri target=_blank><i class="fab fa-twitter fa-1x text-muted" style=width:32px;height:32px></i></a></li><li class="list-inline-item mr-3"><a href=mailto:davcri91@gmail.com target=_blank><i class="fas fa-envelope fa-1x text-muted" style=width:32px;height:32px></i></a></li><li class="list-inline-item mr-3"><a href=https://www.linkedin.com/in/davide-cristini-a8199715a/ target=_blank><i class="fab fa-linkedin fa-1x text-muted" style=width:32px;height:32px></i></a></li><li class="list-inline-item mr-3"><a href=https://davcri.github.io/index.xml target=_blank><i class="fa fa-1x fa-rss text-muted"></i></a></li></ul></div></div></nav><div id=post-container><h2 class=card-title>Programmatically create an AtlasTexture in Godot</h2><div class=row><div class=col><p class=text-muted>2min read<br><span class="badge badge-primary">Godot Engine</span>
<span class="badge badge-primary">Tutorial</span>
<span class="badge badge-primary">Game Dev</span>
<span class="badge badge-primary">Open Source</span></p></div><div class=col><p class="text-right text-muted">December 4, 2018</p></div></div><div id=post-header class=text-center><img class="img-fluid rounded" src=/img/posts/thumbs/godot-atlastexture-programmatically.png alt="GodotEngine AtlasTexture thumbnail" style=max-height:20em></div><hr><div id=post-body class=card-text><p>I&rsquo;m currently working on a card game tutorial (that will soon be open sourced) and I needed to create an <code>AtlasTexture</code> resource
programmatically, a task that I didn&rsquo;t find documented anywhere in the Godot reference so I thought about creating
this short post to describe how to do it.</p><h2 id=what-i-tried>What I tried</h2><p>At first I tried to create an AtlasTexture with <code>var t = AtlasTexture()</code> but this was not working at all:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>Invalid call. Nonexistent <span style=color:#66d9ef>function</span> <span style=color:#e6db74>&#39;AtlasTexture&#39;</span> in base <span style=color:#e6db74>&#39;TextureButton (Card.gd)&#39;</span>
</code></pre></div><h2 id=the-right-way--of-doing-it>The right way of doing it</h2><p>So I went to the Godot Discord channel and I was told to use</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>var t <span style=color:#f92672>=</span> AtlasTexture<span style=color:#f92672>.</span>new()
</code></pre></div><p>And <strong>this worked</strong>, but I
was a little bit disappointed.</p><p>The <code>new()</code> method is not listed in any of the reference docs in Godot so I coulnd&rsquo;t know that it
was even possible to create a resource in this way.</p><p>However after creating the texture, you can just assign the correct properties and then use it
with your game nodes; here it is what I have in my script to create an <code>AtlasTexture</code> and assign it
to a <code>TextureButton</code> node:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py>extends TextureButton

var CARD_HEIGHT <span style=color:#f92672>=</span> <span style=color:#ae81ff>256</span>
var CARD_WIDTH <span style=color:#f92672>=</span> <span style=color:#ae81ff>256</span>
var CARDS_PER_ROW <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>

func _ready():
    <span style=color:#75715e># create a new AtlasTexture resource and assign it to a variable</span>
	var t <span style=color:#f92672>=</span> AtlasTexture<span style=color:#f92672>.</span>new()

	<span style=color:#75715e># load a texture resource into the &#34;AtlasTexture.atlas&#34; field</span>
	t<span style=color:#f92672>.</span>atlas <span style=color:#f92672>=</span> load(<span style=color:#e6db74>&#34;res://assets/cards/cards_atlas0.png&#34;</span>)

	<span style=color:#75715e># set the region (customize this code accordingly to your assets)</span>
	t<span style=color:#f92672>.</span>region <span style=color:#f92672>=</span> (
        (card_index <span style=color:#f92672>%</span> CARDS_PER_ROW)<span style=color:#f92672>*</span>CARD_WIDTH, 
		(card_index <span style=color:#f92672>/</span> CARDS_PER_ROW)<span style=color:#f92672>*</span>CARD_HEIGHT, 
		CARD_WIDTH, 
		CARD_HEIGHT
	)

    <span style=color:#75715e># now you can assign the AtlasTexture resource to a &#34;texture&#34; field on any object</span>
    <span style=color:#75715e># eg: for a TextureButton, like in my case you can write</span>
    self<span style=color:#f92672>.</span>texture_normal <span style=color:#f92672>=</span> t 
</code></pre></div><h2 id=contributing-to-the-doc>Contributing to the doc</h2><p>I also opened an issue the Godot docs repository, so that we can improve the documentation and ease this workflow
for other Godot programmers (hopefully).</p><p>I didn&rsquo;t propose changes directly because I don&rsquo;t know the internals of Godot and I prefer to discuss
the issue with more expert developers before: <a href=https://github.com/godotengine/godot-docs/issues/1968>https://github.com/godotengine/godot-docs/issues/1968</a></p><p><strong>Update [15 December 2018]</strong>: I contributed to the docs, it should be easier now for
new users! I&rsquo;m so glad to improve other programmers workflow! And the Godot people
were also super welcoming, even if I didn&rsquo;t read properly the contributing guidelines
and made a mistake with my first pull request.</p></div></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='crystal-bit-io';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><div id=footer><div class=row><div class=col-3></div><div class=col-3></div><div class="col-6 text-right"><p class="small text-muted">© 2020 Davide Cristini</p></div></div></div></div><script type=text/javascript src="https://cdn.jsdelivr.net/npm/cookie-bar/cookiebar-latest.min.js?tracking=1&thirdparty=1&always=1"></script><script>function enableGoogleAnalytics(){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','');}
function getCookiesAsObj(){return document.cookie.split(';').reduce((res,c)=>{const[key,val]=c.trim().split('=').map(decodeURIComponent)
const allNumbers=str=>/^\d+$/.test(str);try{return Object.assign(res,{[key]:allNumbers(val)?val:JSON.parse(val)})}catch(e){return Object.assign(res,{[key]:val})}},{});}
const cookies=getCookiesAsObj();if(cookies["cookiebar"]==='CookieAllowed'){enableGoogleAnalytics();}else{document.addEventListener('click',(event)=>{const cookies=getCookiesAsObj();if(cookies["cookiebar"]==='CookieAllowed'){this.enableGoogleAnalytics();}});}</script></body></html>